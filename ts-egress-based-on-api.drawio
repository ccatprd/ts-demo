<?xml version="1.0" encoding="utf-8"?>
<mxfile host="app.diagrams.net" modified="2025-08-27T15:53:04Z" agent="python" version="22.0.8" type="device">
  
  
  <diagram id="tailscale-arch-4" name="Tailscale API Server Proxy (Technical)">
    
        
    
    <mxGraphModel dx="1600" dy="900" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1920" pageHeight="1080" math="0" shadow="0">
      
            
      
      <root>
        
                
        
        <mxCell id="0"/>
        
        
        
        
        <mxCell id="1" parent="0"/>
        
                
        
        <mxCell id="frame" value="" style="rounded=1;whiteSpace=wrap;html=1;strokeColor=#CCCCCC;fillColor=#0b0c10;" vertex="1" parent="1">
          
          
          
          
          <mxGeometry x="20" y="20" width="1880" height="1040" as="geometry"/>
          
          
        
        
        </mxCell>
        
        
            
        
        <mxCell id="title" value="Tailscale API Server Proxy Architecture" style="text;html=1;align=left;verticalAlign=top;spacing=8;fontSize=24;fontStyle=1;fontColor=#FFFFFF;" vertex="1" parent="1">
          
          
          
          
          <mxGeometry x="40" y="30" width="900" height="40" as="geometry"/>
          
          
        
        
        </mxCell>
        
        
            
        
        <mxCell id="laptop" value="Developer Laptop (kubectl)" style="shape=process;whiteSpace=wrap;html=1;fillColor=#123C69;strokeColor=#084C61;fontStyle=1;align=center;fontColor=#FFFFFF;" vertex="1" parent="1">
          
          
          
          
          <mxGeometry x="80" y="260" width="270" height="110" as="geometry"/>
          
          
        
        
        </mxCell>
        
        
            
        
        <mxCell id="tsclient" value="Tailscale Client (Windows)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#1B998B;strokeColor=#117A65;fontStyle=1;align=center;fontColor=#FFFFFF;" vertex="1" parent="1">
          
          
          
          
          <mxGeometry x="380" y="270" width="280" height="90" as="geometry"/>
          
          
        
        
        </mxCell>
        
        
            
        
        <mxCell id="vpc" value="AWS VPC (Private Subnets)" style="rounded=1;whiteSpace=wrap;html=1;strokeColor=#1f618d;fillColor=#0e1824;dashed=1;dashPattern=8 4;fontStyle=1;fontSize=14;align=left;spacingLeft=12;spacingTop=12;fontColor=#FFFFFF;" vertex="1" parent="1">
          
          
          
          
          <mxGeometry x="720" y="160" width="1080" height="520" as="geometry"/>
          
          
        
        
        </mxCell>
        
        
            
        
        <mxCell id="operator" value="Tailscale Operator Pod (tsnet + API Server Proxy :443)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E27D60;strokeColor=#C36F4A;fontStyle=1;align=center;fontColor=#FFFFFF;" vertex="1" parent="1">
          
          
          
          
          <mxGeometry x="800" y="360" width="380" height="120" as="geometry"/>
          
          
        
        
        </mxCell>
        
        
            
        
        <mxCell id="oauth" value="OAuth client (ID/Secret) in K8s Secret → Operator logs into tailnet" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#F4D35E;strokeColor=#B7950B;align=center;" vertex="1" parent="1">
          
          
          
          
          <mxGeometry x="800" y="500" width="380" height="70" as="geometry"/>
          
          
        
        
        </mxCell>
        
        
            
        
        <mxCell id="eks" value="EKS API Server Private Endpoint Only :443" style="shape=cylinder3;whiteSpace=wrap;html=1;fillColor=#C38D9E;strokeColor=#8E44AD;fontStyle=1;align=center;fontColor=#FFFFFF;" vertex="1" parent="1">
          
          
          
          
          <mxGeometry x="1220" y="340" width="340" height="160" as="geometry"/>
          
          
        
        
        </mxCell>
        
        
            
        
        <mxCell id="rbac" value="Auth mode: Tailscale identity → Kubernetes RBAC" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#2E86C1;strokeColor=#1F618D;align=center;fontColor=#FFFFFF;" vertex="1" parent="1">
          
          
          
          
          <mxGeometry x="1180" y="520" width="420" height="50" as="geometry"/>
          
          
        
        
        </mxCell>
        
        
            
        
        <mxCell id="control" value="Tailscale Control Plane (Coordination &amp; Key Exchange, DERP)" style="ellipse;whiteSpace=wrap;html=1;fillColor=#F2F3F4;strokeColor=#7B7D7D;fontStyle=1;align=center;" vertex="1" parent="1">
          
          
          
          
          <mxGeometry x="1540" y="60" width="320" height="150" as="geometry"/>
          
          
        
        
        </mxCell>
        
        
            
        
        <mxCell id="terraform" value="Terraform (IaC) Provision VPC + EKS" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#6441A5;strokeColor=#5B2C6F;fontStyle=1;align=center;fontColor=#FFFFFF;" vertex="1" parent="1">
          
          
          
          
          <mxGeometry x="940" y="720" width="320" height="110" as="geometry"/>
          
          
        
        
        </mxCell>
        
        
            
        
        <mxCell id="e1" value="HTTPS 443 (Tailnet HTTPS, MagicDNS *.ts.net)" style="edgeStyle=orthogonalEdgeStyle;rounded=1;strokeColor=#1B4F72;fontSize=12;fontColor=#FFFFFF;labelBackgroundColor=#0b0c10;" edge="1" parent="1" source="laptop" target="tsclient">
          
          
          
          
          <mxGeometry relative="1" as="geometry">
            
            
            <Array as="points">
              
              
              <mxPoint x="360" y="250"/>
              
              
              <mxPoint x="520" y="250"/>
              
            
            </Array>
            
          
          </mxGeometry>
          
          
        
        
        </mxCell>
        
        
            
        
        <mxCell id="e2" value="WireGuard UDP 41641 (default; NAT traversal) DERP TCP 443 fallback" style="edgeStyle=orthogonalEdgeStyle;rounded=1;strokeColor=#117A65;fontSize=12;fontColor=#FFFFFF;labelBackgroundColor=#0b0c10;" edge="1" parent="1" source="tsclient" target="operator">
          
          
          
          
          <mxGeometry relative="1" as="geometry">
            
            
            <Array as="points">
              
              
              <mxPoint x="680" y="300"/>
              
              
              <mxPoint x="780" y="380"/>
              
            
            </Array>
            
          
          </mxGeometry>
          
          
        
        
        </mxCell>
        
        
            
        
        <mxCell id="e3" value="HTTPS 443 (private VPC endpoint)" style="edgeStyle=orthogonalEdgeStyle;rounded=1;strokeColor=#922B21;fontSize=12;fontColor=#FFFFFF;labelBackgroundColor=#0b0c10;" edge="1" parent="1" source="operator" target="eks">
          
          
          
          
          <mxGeometry relative="1" as="geometry">
            
            
            <Array as="points">
              
              
              <mxPoint x="1080" y="420"/>
              
              
              <mxPoint x="1200" y="420"/>
              
            
            </Array>
            
          
          </mxGeometry>
          
          
        
        
        </mxCell>
        
        
            
        
        <mxCell id="e4" value="Coordination &amp; Key Mgmt (HTTPS 443) Relay as needed (DERP TCP 443)" style="edgeStyle=orthogonalEdgeStyle;rounded=1;dashed=1;dashPattern=4 4;strokeColor=#626567;fontSize=12;labelBackgroundColor=#0b0c10;" edge="1" parent="1" source="operator" target="control">
          
          
          
          
          <mxGeometry relative="1" as="geometry">
            
            
            <Array as="points">
              
              
              <mxPoint x="990" y="330"/>
              
              
              <mxPoint x="1680" y="120"/>
              
            
            </Array>
            
          
          </mxGeometry>
          
          
        
        
        </mxCell>
        
        
            
        
        <mxCell id="e5" value="Coordination &amp; Key Mgmt (HTTPS 443) Relay as needed (DERP TCP 443)" style="edgeStyle=orthogonalEdgeStyle;rounded=1;dashed=1;dashPattern=4 4;strokeColor=#626567;fontSize=12;labelBackgroundColor=#0b0c10;" edge="1" parent="1" source="tsclient" target="control">
          
          
          
          
          <mxGeometry relative="1" as="geometry">
            
            
            <Array as="points">
              
              
              <mxPoint x="520" y="240"/>
              
              
              <mxPoint x="1680" y="120"/>
              
            
            </Array>
            
          
          </mxGeometry>
          
          
        
        
        </mxCell>
        
        
            
        
        <mxCell id="e6" value="Provision VPC + EKS" style="edgeStyle=orthogonalEdgeStyle;rounded=1;strokeColor=#7D3C98;fontSize=12;fontColor=#FFFFFF;labelBackgroundColor=#0b0c10;" edge="1" parent="1" source="terraform" target="eks">
          
          
          
          
          <mxGeometry relative="1" as="geometry">
            
            
            <Array as="points">
              
              
              <mxPoint x="1100" y="700"/>
              
              
              <mxPoint x="1380" y="500"/>
              
            
            </Array>
            
          
          </mxGeometry>
          
          
        
        
        </mxCell>
        
        
          
      
      </root>
      
          
    
    </mxGraphModel>
    
      
  
  </diagram>
  
  
  <diagram id="e0e0aa898667" name="Cluster Egress">xZhvb+o2FMa/itVKVa80IP8IAUolCEnvVdcOjW59bRIXoho7cwyFffodO2kSGLtKaaXlleMQ5zy/c/zY5ma9uxM4XT3wmFAU70YXpmUYFyjejy481ViKJIbOvDFP/iZwo7o3SUwy/UByTmWS5jcRZ4xEUrexEPwt737hNB8lxUtSNuYRptXdcxLLFdz1LSPv+E6S5UoNZXjQs8bqKTSyFY75m2re3gjO5e3NeucTSpEKFJ53Djr04IIweeKZdYG2mG4ghCec0ExFg3y6ySQRKFgKkmVoLKJVIkHRRhD4tNyrgCXZyeFKrunIHGZS8Ffic8rFiHFGhi8JpbVbTJMlG0UQABHDLREygc+Mdafk6fCFM6mpWlbe1l+oBQ1N9RZRmblQ0d8RviZS7NFOK9rn+Xirw1sV4BxoY0jAsnhF6+/kAA5A2CWIUqPgGxaTGBS+KQDzFEdk9Aal8i680nkZ9sJ+ODlAcTk1pr1pMGwoxMqVuDUlnldT0veaSnFKKePnOfpz5qPrmUi2WBI03ywYkdm3szQGQeiG4aHGcc/vBb1hjLOVHkU1ZlhCptnIQ05NvP1z8UUe6/Kdbk1+r9tUfvdUSUNdCU7RjGJGri5NY3jt8xYXccKwTDhDV3idDtE92aNgF60wW5Jf0DT4fVaRgjmXkhF8BOY5aUDL0NchLVtfusrf60ZfTTHlSIBTv8JkOzVKZuN6d0tKU7JFv+IUpiK6fk4YGEv2TSOq8EU0geB05/enpxnKiIAgByjdyxVnNmqt0UrKtJ33I3BNA7VaCxgMmYbR7ltty+i1TaNbjgtViH7MBkePzytLL7QD/xB0fzw1J42rz82h2kaNat1EzH5Tqr0TtfdbSgSWXKAZj/PSe8AMvD1DsgAxB2xJBB0YgKWC7xJy5hQNp8FkelR0gTF2nEmNhfMzFk7OwqmhcOsorKYovBLF/WYBdkAkCJw+zhHMPEGgcabCMPQC80ih69vu+IMKrXq2jbrRNlXYLxVCZgcI9MkF36FrTNOEkYHdNvv5RIo2guoJMuh0ipy3iF5cWzFZ83ZMXvCGyna2jQZq7nTWe1BM2nInz2UUHhv1xJj0fLsxI6+YElYFyTmoA7MpJfXDAlNR5wN0AkLuDPsUngY7tXxg+ojXuVePGeNS+3T+qp5X7YivS5pJOjjlNP7j+CFAraulHCKZtU58trVTV7saFXLQjvINUJty6DrTk2CxHB9mwB1700njDICaf7tS1zrL602zTEEpFDGgmykNmlSVmjMx6VFm4F175XNqJRHkboNFjP6YzpBjuo451CsqevLh3rHRC6Z0gaPXM33ABt8/rnHTcwL3w4R1sZ8k3HjPYVb76OB+jgoy6Dot9l2ExSlPmMz94JmLV8pxnKGEoWLyI5YNq6UC+muZys4jZIWT0D1aFydT0/M/6JRd678Wg+YmUG2v9QZC21ypCuiM1UFptIBSej08VuRHIuswZBIXR6iMbwQQUFYssVgSfVQ61CEIBevY5r9vFmy1gVbr1V8bAsN0kDaTD8V8clfsIre5GO/TWqrdcN1Wiw98YQZUKZQpMD8ddrU9rYxE8iOP/+oqUj75rsH9tIRqL+jz2kmjg17JPvvqOrJPyOlVarqfVuP932rcz6rp5P+UdOp/99z+Aw==</diagram>
  

</mxfile>
